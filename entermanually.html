<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Enter Manually | Expiry Wise Shelf Guardian</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="bg-gradient-to-br from-green-50 via-white to-green-100 text-[#2c3e50] font-sans"
  >
    <!-- Navbar -->
    <nav
      class="bg-gradient-to-r from-teal-500 to-green-500 text-white px-6 py-4 flex justify-between items-center rounded-b-xl shadow"
    >
      <div class="text-xl font-bold">Expiry Wise Shelf Guardian</div>
      <div class="text-sm italic">
        Smart inventory management with database storage
      </div>
    </nav>

    <!-- Centered Modal Form -->
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-3xl">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-semibold">Add New Product</h2>
          <button onclick="window.history.back()">‚úñ</button>
        </div>
        <form id="manualForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm mb-1">Product Name *</label>
            <input
              type="text"
              id="productName"
              required
              placeholder="Enter product name"
              class="w-full px-4 py-2 border rounded"
            />
          </div>

          <div>
            <label class="block text-sm mb-1">Category *</label>
            <select
              id="category"
              required
              class="w-full px-4 py-2 border rounded"
            >
              <option value="">Select category</option>
              <option value="Food">Food</option>
              <option value="Beverage">Beverage</option>
              <option value="Medicine">Medicine</option>
              <option value="Cosmetic">Cosmetic</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div>
            <label class="block text-sm mb-1">Supplier</label>
            <input
              type="text"
              id="supplier"
              placeholder="Enter supplier name"
              class="w-full px-4 py-2 border rounded"
            />
          </div>

          <div>
            <label class="block text-sm mb-1">Price (‚Çπ) *</label>
            <input
              type="number"
              id="price"
              required
              value="0"
              class="w-full px-4 py-2 border rounded"
            />
          </div>

          <div>
            <label class="block text-sm mb-1">Quantity *</label>
            <input
              type="number"
              id="quantity"
              required
              value="1"
              class="w-full px-4 py-2 border rounded"
            />
          </div>

          <div>
            <label class="block text-sm mb-1">Purchase Date</label>
            <input
              type="date"
              id="purchaseDate"
              class="w-full px-4 py-2 border rounded"
              value=""
            />
          </div>

          <div>
            <label class="block text-sm mb-1">Expiry Date *</label>
            <input
              type="date"
              id="expiryDate"
              required
              class="w-full px-4 py-2 border rounded"
            />
          </div>

          <div>
            <label class="block text-sm mb-1">Alert Days Before Expiry</label>
            <select id="alertDays" class="w-full px-4 py-2 border rounded">
              <option value="3">3 days</option>
              <option value="5">5 days</option>
              <option value="7" selected>7 days</option>
              <option value="10">10 days</option>
              <option value="15">15 days</option>
            </select>
          </div>

          <div class="col-span-1 md:col-span-2 flex justify-center mt-4 gap-4">
            <button
              type="submit"
              class="bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600 shadow"
            >
              üíæ Save Product
            </button>
            <button
              type="button"
              onclick="window.history.back()"
              class="bg-gray-300 text-black px-6 py-2 rounded hover:bg-gray-400"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Optional JS -->
    <script>
      document.getElementById("purchaseDate").valueAsDate = new Date();

      document
        .getElementById("manualForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const data = {
            name: document.getElementById("productName").value,
            category: document.getElementById("category").value,
            supplier: document.getElementById("supplier").value,
            price: parseFloat(document.getElementById("price").value),
            quantity: parseInt(document.getElementById("quantity").value),
            purchaseDate: document.getElementById("purchaseDate").value,
            expiryDate: document.getElementById("expiryDate").value,
            alertDays: parseInt(document.getElementById("alertDays").value),
          };

          try {
            const res = await fetch("http://localhost:8080/api/products", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(data),
            });

            if (!res.ok) throw new Error("Failed to save");
            alert("‚úÖ Product saved successfully!");
            e.target.reset();
          } catch (err) {
            console.error(err);
            alert("‚ùå Error saving product!");
          }
        });
    </script>
 ¬†</body>
</html>